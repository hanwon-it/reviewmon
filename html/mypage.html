<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>마이 페이지 – review_mon</title>
    <link rel="stylesheet" href="../css/common.css" />
    <link rel="stylesheet" href="../css/mypage.css" />
    <script src="../js/activate_search.js"></script>
  </head>
  <body>
    <!-- 헤더 -->
    <header class="header">
      <div class="header_inner">
        <img src="../css/image/logo.svg" alt="ReviewMon 로고" class="logo" />

        <!-- 검색창 영역 -->
        <div class="search_box">
          <select class="search_category" id="search_category">
            <option value="movie">영화정보</option>
            <option value="person">감독/배우</option>
            <option value="user">유저</option>
          </select>

          <input
            type="text"
            class="search_input"
            id="search_input"
            placeholder="검색어를 입력하세요"
          />

          <button class="search_btn" id="search_btn" aria-label="검색">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <circle cx="11" cy="11" r="8"></circle>
              <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
          </button>
        </div>

        <!-- 사용자 액션 -->
        <div class="user_actions">
          <button class="btn btn_mypage">마이페이지</button>
          <button class="btn btn_logout">로그아웃</button>
        </div>
      </div>
    </header>

    <main class="my_page">
      <!-- 프로필 섹션 -->
      <section class="profile_section">
        <h1>프로필</h1>
        <div class="profile_fields">
          <div class="big_field">
            <div class="field">
              <label for="user_id">아이디</label>
              <input id="user_id" type="text" value="" readonly />
            </div>
            <div class="field">
              <label for="join_date">가입일자</label>
              <input id="join_date" type="text" value="" readonly />
            </div>
          </div>
        </div>
        <hr class="profile_edit_divider" />
        <div class="profile_edit_fields">
          <div class="field">
            <label for="nickname">닉네임</label>
            <input id="nickname" type="text" value="현재 닉네임" readonly />
            <button class="btn_edit">수정</button>
          </div>
          
          <div class="field">
            <label for="hp">휴대폰 번호</label>
            <input
              id="hp"
              type="text"
              value="현재 핸드폰 번호 띄우기"
              readonly
            />
            <button class="btn_edit">수정</button>
          </div>
          <div class="field">
            <label for="email">이메일</label>
            <input
              id="email"
              type="email"
              value="현재 이메일 띄우기"
              readonly
            />
            <button class="btn_edit">수정</button>
          </div>
          <div class="field" id="pw_field_wrap" style="display:flex; flex-direction:row; align-items:center; gap:16px;">
            <label for="password" style="min-width:120px;">비밀번호 변경</label>
            <div style="display:flex; flex-direction:column; gap:8px;">
              <input id="password" type="password" value="" readonly style="display:none; width:220px;" />
              <input id="password_confirm" type="password" value="" readonly style="display:none; width:220px;" placeholder="비밀번호 확인" />
              <p id="pw_check_msg" class="password_match" style="display:none; margin:0; width:auto;"></p>
            </div>
            <div class="pw_btns" style="display:flex; flex-direction:column; gap:8px; margin-left:auto;">
              <button class="btn_edit" id="btn_pw_edit">수정</button>
              <button class="btn_save" id="btn_pw_save" style="display:none;">저장</button>
              <button class="btn_cancel" id="btn_pw_cancel" style="display:none;">취소</button>
            </div>
          </div>
        </div>
      </section>
      <div class="myreview_section">
        <button id="btn_myreview" class="btn_myreview">내가 쓴 리뷰 보러가기</button>
      </div>
      <hr class="section_divider" />
      <!-- 선호조사 섹션 -->
      <section class="preferences_section">
        <h1>선호조사</h1>
        <div class="field">
          <label for="genre_buttons">선호 장르</label>
          <span id="genre_display"></span>
          <button id="genre_edit_btn">수정</button>
        </div>
        <div class="field" id="genre_edit_area" style="display:none; flex-direction:column; align-items:flex-start; gap:8px;">
          <div class="genre-toggle-wrap" id="genre_edit_toggle_wrap"></div>
          <div class="modal-actions">
            <button id="genre_save_btn" class="btn-confirm">저장</button>
            <button id="genre_cancel_btn" class="btn-cancel">취소</button>
          </div>
        </div>
        <div class="field">
          <label>좋아하는 배우</label>
          <span id="actor_display"></span>
          <button id="actor_edit_btn">수정</button>
        </div>
        <div class="field" id="actor_edit_area" style="display:none; flex-direction:column; align-items:flex-start; gap:8px;">
          <div id="mypage_actor_fields"></div>
          <button type="button" id="mypage_add_actor_btn">+ 배우 추가</button>
          <div style="display:flex; gap:8px;">
            <button class="btn_add" id="mypage_save_actor_btn">저장</button>
            <button class="btn_cancel" id="mypage_cancel_actor_btn">취소</button>
          </div>
        </div>
        <div class="field">
          <label>좋아하는 감독</label>
          <span id="director_display"></span>
          <button id="director_edit_btn">수정</button>
        </div>
        <div class="field" id="director_edit_area" style="display:none; flex-direction:column; align-items:flex-start; gap:8px;">
          <div id="mypage_director_fields"></div>
          <button type="button" id="mypage_add_director_btn">+ 감독 추가</button>
          <div style="display:flex; gap:8px;">
            <button class="btn_add" id="mypage_save_director_btn">저장</button>
            <button class="btn_cancel" id="mypage_cancel_director_btn">취소</button>
          </div>
        </div>
      </section>
      <div class="withdrawal_section">
        <button id="btn_withdrawal" class="btn_del_account">회원탈퇴</button>
      </div>
    </main>
    <!-- 장르 선택 모달 (genre_preferences_modal) -->
    <div id="genre_preferences_modal" class="modal">
      <div class="modal-content">
        <p class="modal-text">선호하는 장르를 선택해주세요 (최대 3개)</p>
        <div class="genre-toggle-wrap">
          <button class="genre-toggle" data-genre="28">액션</button>
          <button class="genre-toggle" data-genre="12">모험</button>
          <button class="genre-toggle" data-genre="16">애니메이션</button>
          <button class="genre-toggle" data-genre="35">코미디</button>
          <button class="genre-toggle" data-genre="80">범죄</button>
          <button class="genre-toggle" data-genre="99">다큐멘터리</button>
          <button class="genre-toggle" data-genre="18">드라마</button>
          <button class="genre-toggle" data-genre="10751">가족</button>
          <button class="genre-toggle" data-genre="14">판타지</button>
          <button class="genre-toggle" data-genre="10749">로맨스</button>
        </div>
        <div class="modal-actions">
          <button id="genre_preferences_confirm" class="btn-confirm">
            저장
          </button>
          <button id="genre_preferences_cancel" class="btn-cancel">취소</button>
        </div>
      </div>
    </div>

    <!-- 회원탈퇴 확인 모달 -->
    <div id="withdrawalModal" class="modal">
      <div class="modal-content">
        <p class="modal-text">
          회원탈퇴를 계속하시겠습니까?<br />
          (회원탈퇴시 리뷰는 삭제되며 복구가 불가합니다)
        </p>
        <div class="modal-actions">
          <button id="confirmWithdrawalBtn" class="btn-confirm">예</button>
          <button id="cancelWithdrawalBtn" class="btn-cancel">아니요</button>
        </div>
      </div>
    </div>

    <!-- 푸터 -->
    <footer class="footer">
      <p>
        문의: <a href="mailto:reviewmon@email.com">reviewmon@email.com</a> |
        <a href="#" id="open_terms">이용약관</a> |
        <a href="#" id="open_privacy">개인정보처리방침</a>
      </p>
    </footer>

    <!-- 약관 오버레이 (회원가입에서 재활용) -->
    <div class="terms_overlay" id="terms_overlay" style="display: none">
      <div class="terms_modal">
        <button class="terms_close" id="terms_close">&times;</button>
        <h2 id="terms_title">이용약관</h2>
        <div class="terms_content">
          <p>
            본 서비스는 영화 리뷰 제공 및 추천 서비스를 목적으로 하며, 회원은
            본인의 계정을 통해 자유롭게 콘텐츠를 이용할 수 있습니다.
          </p>
          <p>
            회원은 타인의 개인정보를 침해하거나 부정한 방법으로 서비스를
            이용해서는 안 되며, 서비스 내의 콘텐츠는 상업적 용도로 무단 이용할
            수 없습니다.
          </p>
          <p>
            관리자는 예고 없이 서비스의 일부 또는 전부를 수정, 중단할 수 있으며,
            회원의 부주의로 발생한 피해에 대해서는 책임지지 않습니다.
          </p>
          <p>
            기타 자세한 이용 규정은 회사의 공식 안내 및 고객센터 공지를
            따릅니다.
          </p>
        </div>
      </div>
    </div>

    <script src="../js/logout.js"></script>
    <script>
      document.getElementById('btn_myreview').onclick = function() {
        location.href = 'myreview.html';
      };
    </script>
    <script src="../js/activate_search.js"></script>
    <script src="../js/mypage.js" type="module"></script>
    
  </body>
</html>

